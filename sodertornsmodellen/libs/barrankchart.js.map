{"version":3,"sources":["webpack:///webpack/bootstrap 4e607fc562d3a3fc6c04","webpack:///./src/index.js","webpack:///./src/component.js","webpack:///./~/css.escape/css.escape.js","webpack:///./src/styles.scss?ccec","webpack:///./src/template.html","webpack:///(webpack)/buildin/global.js"],"names":["VERSION_INFO","version","build","Vizabi","Tool","extend","init","placeholder","externalModel","name","components","component","model","Component","get","_super","default_model","entities_tags","marker_tags","space","label","use","which","hook_parent","scales","locale","ui","chart","datawarning","doubtDomain","doubtRange","presentation","versionInfo","utils","axisWithLabelPicker","helpers","iconQuestion","iconset","question","iconWarn","warn","COLOR_BLACKISH","COLOR_WHITEISH","BarRankChart","config","context","template","require","model_expects","type","model_binds","_ready","_readyOnce","onTimeChange","_selectBars","_updateOpacity","_updateDoubtOpacity","_scroll","loadData","draw","_drawColors","xScale","cScale","d3","scaleOrdinal","schemeCategory10","xAxis","marker","getFrame","time","value","values","readyOnce","element","select","header","infoEl","barViewport","barSvg","barContainer","dataWarningEl","wScale","scaleLinear","domain","range","tickFormat","axis_x","getTickFormatter","_localeId","id","_entityLabels","_presentation","_formatter","ready","TIMEDIM","getDimension","KEYS","unique","_getAllDimensions","exceptType","KEY","join","dataKeys","getDataKeysPerHook","labelNames","getLabelHookNames","markerKeys","getKeys","resize","_this","translator","getTFunction","xAxisValues","Object","keys","length","sortedEntities","_sortByIndicator","on","parent","findChildByName","markerID","alignX","alignY","updateView","toggle","getScale","copy","color","setIcon","attr","append","text","conceptPropsX","getConceptprops","style","Number","Boolean","description","sourceLink","pin","rect","getBBox","ctx","makeAbsoluteContext","farthestViewportElement","coord","x","y","height","setHook","show","setPos","hide","force","time_1","duration","playing","delayAnimations","drawAxes","drawData","profiles","small","margin","top","right","left","bottom","headerMargin","infoElHeight","infoElMargin","barHeight","barMargin","barRectMargin","barValueMargin","scrollMargin","medium","large","presentationProfileChanges","activeProfile","getActiveProfile","parseInt","width","headerTitle","unit","headerTitleText","rightEdgeOfLeftText","node","headerTitleBBox","titleTx","titleTy","headerInfo","infoTx","infoTy","headerTotal","transition","delay","formatDate","interrupt","getLayoutProfile","headerTotalBBox","totalTx","totalTy","classed","warningBBox","_createAndDeleteBars","selectAll","data","d","presentationModeChanged","entitiesCountChanged","_entitiesCount","_resizeSvg","limits","getLimits","ltr","Math","abs","max","min","hasNegativeValues","rightEdge","_getWidestLabelWidth","scaleType","shift","barWidth","isLtrValue","labelAnchor","valueAnchor","labelX","barX","valueX","isLabelBig","forEach","bar","isNew","changedValue","barLabel","labelSmall","barRect","barValue","changedWidth","ease","easeLinear","changedIndex","self","_getBarPosition","index","follow","empty","datum","yPos","scrollTo","tween","entity","_scrollTopTween","_getLabelText","map","key","updatedBars","localeChanged","exit","remove","enter","each","substring","selectedLabel","size","labelWidth","labelSmallWidth","assign","isSelected","getKey","_id","highlightMarker","clearHighlighted","selectMarker","merge","big","widthKey","labelKey","reduce","a","b","colorValue","isColorValid","fillColor","String","_getColor","strokeColor","_getDarkerColor","rgb","darker","scrollTop","i","interpolateNumber","t","_entities","dataKey","cached","formattedValue","sort","selected","selectedBar","OPACITY_HIGHLIGHT_DEFAULT","highlight","OPACITY_HIGHLIGHT_DIM","opacityHighlightDim","OPACITY_SELECT_DIM","opacitySelectDim","OPACITY_REGULAR","opacityRegular","someHighlighted","someSelected","isHighlighted","opacity","getUTCFullYear","toString"],"mappings":"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","file":"barrankchart.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4e607fc562d3a3fc6c04","import \"./styles.scss\";\nimport component from \"./component\";\n\nconst VERSION_INFO = { version: __VERSION, build: __BUILD };\n\nexport default Vizabi.Tool.extend(\"BarRankChart\", {\n\n  // Run when the tool is created\n  init: function (placeholder, externalModel) {\n\n    this.name = \"barrankchart\";\n\n    this.components = [{\n      component: component,\n      placeholder: \".vzb-tool-viz\",\n      model: [\"state.time\", \"state.marker\", \"locale\", \"ui\"]\n    }, {\n      component: Vizabi.Component.get(\"timeslider\"),\n      placeholder: \".vzb-tool-timeslider\",\n      model: [\"state.time\", \"state.marker\", \"ui\"]\n    }, {\n      component: Vizabi.Component.get(\"dialogs\"),\n      placeholder: \".vzb-tool-dialogs\",\n      model: [\"state\", \"ui\", \"locale\"]\n    }, {\n      component: Vizabi.Component.get(\"buttonlist\"),\n      placeholder: \".vzb-tool-buttonlist\",\n      model: [\"state\", \"ui\", \"locale\"]\n    }, {\n      component: Vizabi.Component.get(\"treemenu\"),\n      placeholder: \".vzb-tool-treemenu\",\n      model: [\"state.marker\", \"state.marker_tags\", \"state.time\", \"locale\"]\n    }, {\n      component: Vizabi.Component.get(\"datanotes\"),\n      placeholder: \".vzb-tool-datanotes\",\n      model: [\"state.marker\", \"locale\"]\n    }, {\n      component: Vizabi.Component.get(\"datawarning\"),\n      placeholder: \".vzb-tool-datawarning\",\n      model: [\"locale\"]\n    }, {\n      component: Vizabi.Component.get(\"steppedspeedslider\"),\n      placeholder: \".vzb-tool-stepped-speed-slider\",\n      model: [\"state.time\", \"locale\"]\n    }];\n\n    // constructor is the same as any tool\n    this._super(placeholder, externalModel);\n  },\n\n  /**\n   * Determines the default model of this tool\n   */\n  default_model: {\n    \"state\": {\n      \"time\": {\n        \"autoconfig\": {\n          \"type\": \"time\"\n        }\n      },\n      \"entities\": {\n        \"autoconfig\": {\n          \"type\": \"entity_domain\",\n          \"excludeIDs\": [\"tag\"]\n        }\n      },\n      \"entities_colorlegend\": {\n        \"autoconfig\": {\n          \"type\": \"entity_domain\",\n          \"excludeIDs\": [\"tag\"]\n        }\n      },\n      entities_tags: {\n        \"autoconfig\": {\n          \"type\": \"entity_domain\",\n          \"includeOnlyIDs\": [\"tag\"]\n        }\n      },\n      marker_tags: {\n        space: [\"entities_tags\"],\n        label: {\n          use: \"property\",\n          which: \"name\"\n        },\n        hook_parent: {}\n      },\n      \"entities_allpossible\": {\n        \"autoconfig\": {\n          \"type\": \"entity_domain\",\n          \"excludeIDs\": [\"tag\"]\n        }\n      },\n      \"marker_allpossible\": {\n        \"space\": [\"entities_allpossible\"],\n        \"label\": {\n          \"use\": \"property\",\n          \"autoconfig\": {\n            \"includeOnlyIDs\": [\"name\"],\n            \"type\": \"string\"\n          }\n        }\n      },\n      \"marker\": {\n        \"space\": [\"entities\", \"time\"],\n        \"axis_x\": {\n          \"use\": \"indicator\",\n          \"autoconfig\": {\n            \"type\": \"measure\"\n          },\n          \"allow\": { scales: [\"linear\", \"log\"] }\n        },\n        // \"axis_y\": {\n        //   \"use\": \"property\",\n        //   \"allow\": { scales: [\"ordinal\", \"nominal\"] },\n        //   \"autoconfig\": {\n        //     \"type\": \"entity_domain\"\n        //   }\n        // },\n        \"label\": {\n          \"use\": \"property\",\n          \"autoconfig\": {\n            \"includeOnlyIDs\": [\"name\"],\n            \"type\": \"string\"\n          }\n        },\n        \"color\": {\n          \"syncModels\": [\"marker_colorlegend\"],\n          \"autoconfig\": {}\n        }\n      },\n      \"marker_colorlegend\": {\n        \"space\": [\"entities_colorlegend\"],\n        \"label\": {\n          \"use\": \"property\",\n          \"which\": \"name\"\n        },\n        \"hook_rank\": {\n          \"use\": \"property\",\n          \"which\": \"rank\"\n        },\n        \"hook_geoshape\": {\n          \"use\": \"property\",\n          \"which\": \"shape_lores_svg\"\n        }\n      }\n    },\n    locale: {},\n    ui: {\n      chart: {},\n      datawarning: {\n        doubtDomain: [],\n        doubtRange: []\n      },\n      \"buttons\": [\"colors\", \"find\", \"show\", \"moreoptions\", \"fullscreen\", \"presentation\"],\n      \"dialogs\": {\n        \"popup\": [\"timedisplay\", \"colors\", \"find\", \"show\", \"moreoptions\"],\n        \"sidebar\": [\"timedisplay\", \"colors\", \"find\"],\n        \"moreoptions\": [\"opacity\", \"speed\", \"colors\", \"presentation\", \"about\"]\n      },\n      presentation: false\n    }\n  },\n\n  versionInfo: VERSION_INFO\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import cssEscape from \"css.escape\";\nconst utils = Vizabi.utils;\n\nconst axisWithLabelPicker = Vizabi.helpers['d3.axisWithLabelPicker'];\nconst iconQuestion = Vizabi.iconset.question;\nconst iconWarn = Vizabi.iconset.warn;\n\nconst COLOR_BLACKISH = \"rgb(51, 51, 51)\";\nconst COLOR_WHITEISH = \"rgb(253, 253, 253)\";\n\nconst BarRankChart = Vizabi.Component.extend(\"barrankchart\", {\n\n  /**\n   * Initializes the component (Bar Chart).\n   * Executed once before any template is rendered.\n   * @param {Object} config The config passed to the component\n   * @param {Object} context The component's parent\n   */\n  init(config, context) {\n\n    this.name = 'barrankchart';\n    this.template = require('./template.html');\n\n    //define expected models for this component\n    this.model_expects = [{\n      name: \"time\",\n      type: \"time\"\n    }, {\n      name: \"marker\",\n      type: \"marker\"\n    }, {\n      name: \"locale\",\n      type: \"locale\"\n    }, {\n      name: \"ui\",\n      type: \"ui\"\n    }];\n\n    this.model_binds = {\n      'change:time.value': () => {\n        // TODO: review this after vizabi#2450 will be fixed\n        if (!this.model._ready) return;\n\n        if (this._readyOnce) {\n          this.onTimeChange();\n        }\n      },\n      'change:marker.select': () => {\n        if (this._readyOnce) {\n          this._selectBars();\n          this._updateOpacity();\n          this._updateDoubtOpacity();\n          this._scroll();\n        }\n      },\n      'change:marker.axis_x.scaleType': () => {\n        if (this._readyOnce) {\n          if (this.loadData()) {\n            this.draw(true);\n          }\n        }\n      },\n      'change:marker.color.palette': () => {\n        this._drawColors();\n      },\n      'change:marker.highlight': () => {\n        this._updateOpacity();\n      },\n      'change:marker.opacitySelectDim': () => {\n        this._updateOpacity();\n      },\n      'change:marker.opacityRegular': () => {\n        this._updateOpacity();\n      },\n    };\n\n    //contructor is the same as any component\n    this._super(config, context);\n\n    // set up the scales\n    this.xScale = null;\n    this.cScale = d3.scaleOrdinal(d3.schemeCategory10);\n\n    // set up the axes\n    this.xAxis = axisWithLabelPicker(\"bottom\");\n  },\n\n  onTimeChange() {\n    this.model.marker.getFrame(this.model.time.value, values => {\n      this.values = values;\n\n      if (this.values) {\n        if (this.loadData()) {\n          this.draw();\n        }\n      }\n    });\n  },\n\n  /**\n   * DOM and model are ready\n   */\n  readyOnce() {\n    this.element = d3.select(this.element);\n\n    // reference elements\n    //this.graph = this.element.select('.vzb-br-graph');\n    //this.yearEl = this.element.select('.vzb-br-year');\n    //this.year = new DynamicBackground(this.yearEl);\n    this.header = this.element.select('.vzb-br-header');\n    this.infoEl = this.element.select('.vzb-br-axis-info');\n    this.barViewport = this.element.select('.vzb-br-barsviewport');\n    this.barSvg = this.element.select('.vzb-br-bars-svg');\n    this.barContainer = this.element.select('.vzb-br-bars');\n    this.dataWarningEl = this.element.select('.vzb-data-warning');\n    this.wScale = d3.scaleLinear()\n      .domain(this.model.ui.datawarning.doubtDomain)\n      .range(this.model.ui.datawarning.doubtRange);\n\n    // set up formatters\n    this.xAxis.tickFormat(this.model.marker.axis_x.getTickFormatter());\n\n    this._localeId = this.model.locale.id;\n    this._entityLabels = {};\n    this._presentation = !this.model.ui.presentation;\n    this._formatter = this.model.marker.axis_x.getTickFormatter();\n\n    this.ready();\n\n    this._selectBars();\n\n  },\n\n  /**\n   * Both model and DOM are ready\n   */\n  ready() {\n    this.TIMEDIM = this.model.time.getDimension();\n    this.KEYS = utils.unique(this.model.marker._getAllDimensions({ exceptType: \"time\" }));\n    this.KEY = this.KEYS.join(\",\");\n    this.dataKeys = this.model.marker.getDataKeysPerHook();\n    this.labelNames = this.model.marker.getLabelHookNames();\n\n    this.model.marker.getFrame(this.model.time.value, values => {\n      this.values = values;\n\n      if (this.values) {\n        this.markerKeys = this.model.marker.getKeys();\n        if (this.loadData()) {\n          this.draw(true);\n          this._updateOpacity();\n          this._drawColors();\n        }\n      }\n    });\n  },\n\n  resize() {\n    this.draw(true);\n    this._drawColors();\n  },\n\n  loadData() {\n    const _this = this;\n\n    this.translator = this.model.locale.getTFunction();\n    // sort the data (also sets this.total)\n    const xAxisValues = this.values.axis_x;\n    if (!Object.keys(xAxisValues).length) return false;\n\n    this.sortedEntities = this._sortByIndicator(xAxisValues, this.dataKeys.axis_x);\n\n    this.header\n      .select('.vzb-br-title')\n      .select('text')\n      .on('click', () =>\n        this.parent\n          .findChildByName('gapminder-treemenu')\n          .markerID('axis_x')\n          .alignX('left')\n          .alignY('top')\n          .updateView()\n          .toggle()\n      );\n\n    // new scales and axes\n    this.xScale = this.model.marker.axis_x.getScale().copy();\n    this.cScale = this.model.marker.color.getScale();\n\n    utils.setIcon(this.dataWarningEl, iconWarn)\n      .select('svg')\n      .attr('width', 0).attr('height', 0);\n\n    this.dataWarningEl.append('text')\n      .text(this.translator('hints/dataWarning'));\n\n    this.dataWarningEl\n      .on('click', () => this.parent.findChildByName('gapminder-datawarning').toggle())\n      .on('mouseover', () => this._updateDoubtOpacity(1))\n      .on('mouseout', () => this._updateDoubtOpacity());\n\n    const conceptPropsX = this.model.marker.axis_x.getConceptprops();\n    utils.setIcon(this.infoEl, iconQuestion)\n      .select('svg').attr('width', 0).attr('height', 0)\n      .style('opacity', Number(Boolean(conceptPropsX.description || conceptPropsX.sourceLink)));\n\n    this.infoEl.on('click', () => {\n      this.parent.findChildByName('gapminder-datanotes').pin();\n    });\n\n    this.infoEl.on('mouseover', function() {\n      const rect = this.getBBox();\n      const ctx = utils.makeAbsoluteContext(this, this.farthestViewportElement);\n      const coord = ctx(rect.x - 10, rect.y + rect.height + 10);\n      _this.parent.findChildByName('gapminder-datanotes')\n        .setHook('axis_x')\n        .show()\n        .setPos(coord.x, coord.y);\n    });\n\n    this.infoEl.on('mouseout', () => {\n      _this.parent.findChildByName('gapminder-datanotes').hide();\n    });\n\n    return true;\n  },\n\n  draw(force = false) {\n    this.time_1 = this.time == null ? this.model.time.value : this.time;\n    this.time = this.model.time.value;\n    //smooth animation is needed when playing, except for the case when time jumps from end to start\n    const duration = this.model.time.playing && (this.time - this.time_1 > 0) ? this.model.time.delayAnimations : 0;\n\n    //return if drawAxes exists with error\n    if (this.drawAxes(duration, force)) return;\n    this.drawData(duration, force);\n  },\n\n  /*\n   * draw the chart/stage\n   */\n  drawAxes(duration = 0) {\n    const profiles = {\n      small: {\n        margin: { top: 60, right: 5, left: 5, bottom: 20 },\n        headerMargin: { top: 10, right: 20, bottom: 20, left: 20 },\n        infoElHeight: 16,\n        infoElMargin: 5,\n        barHeight: 18,\n        barMargin: 3,\n        barRectMargin: 5,\n        barValueMargin: 5,\n        scrollMargin: 20,\n      },\n      medium: {\n        margin: { top: 60, right: 5, left: 5, bottom: 20 },\n        headerMargin: { top: 10, right: 20, bottom: 20, left: 20 },\n        infoElHeight: 16,\n        infoElMargin: 5,\n        barHeight: 21,\n        barMargin: 3,\n        barRectMargin: 5,\n        barValueMargin: 5,\n        scrollMargin: 25,\n      },\n      large: {\n        margin: { top: 60, right: 5, left: 5, bottom: 20 },\n        headerMargin: { top: 10, right: 20, bottom: 20, left: 20 },\n        infoElHeight: 16,\n        infoElMargin: 5,\n        barHeight: 28,\n        barMargin: 4,\n        barRectMargin: 5,\n        barValueMargin: 5,\n        scrollMargin: 25,\n      }\n    };\n\n    const presentationProfileChanges = {\n      medium: {\n        margin: { top: 60, right: 10, left: 10, bottom: 40 },\n        headerMargin: { top: 10, right: 20, bottom: 20, left: 20 },\n        infoElHeight: 25,\n        infoElMargin: 10,\n        barHeight: 25,\n        barMargin: 6\n      },\n      large: {\n        margin: { top: 60, right: 10, left: 10, bottom: 40 },\n        headerMargin: { top: 10, right: 20, bottom: 20, left: 20 },\n        infoElHeight: 16,\n        infoElMargin: 10,\n        barHeight: 30,\n        barMargin: 6\n      }\n    };\n\n    this.activeProfile = this.getActiveProfile(profiles, presentationProfileChanges);\n\n    const {\n      margin,\n      headerMargin,\n      infoElHeight,\n      infoElMargin,\n    } = this.activeProfile;\n\n    this.height = parseInt(this.element.style('height'), 10) || 0;\n    this.width = parseInt(this.element.style('width'), 10) || 0;\n\n    if (!this.height || !this.width) return utils.warn('Dialog resize() abort: vizabi container is too little or has display:none');\n\n    this.barViewport\n      .style('height', `${this.height - margin.bottom - margin.top}px`);\n\n    // header\n    this.header.attr('height', margin.top);\n    const headerTitle = this.header.select('.vzb-br-title');\n\n    // change header titles for new data\n    const { name, unit } = this.model.marker.axis_x.getConceptprops();\n\n    const headerTitleText = headerTitle\n      .select('text');\n\n    if (unit) {\n      headerTitleText.text(`${name}, ${unit}`);\n\n      const rightEdgeOfLeftText = headerMargin.left\n        + headerTitle.node().getBBox().width\n        + infoElMargin\n        + infoElHeight;\n\n      if (rightEdgeOfLeftText > this.width - headerMargin.right) {\n        headerTitleText.text(name);\n      }\n    } else {\n      headerTitleText.text(name);\n    }\n\n    const headerTitleBBox = headerTitle.node().getBBox();\n\n    const titleTx = headerMargin.left;\n    const titleTy = headerMargin.top + headerTitleBBox.height;\n    headerTitle\n      .attr('transform', `translate(${titleTx}, ${titleTy})`);\n\n    const headerInfo = this.infoEl;\n\n    headerInfo.select('svg')\n      .attr('width', `${infoElHeight}px`)\n      .attr('height', `${infoElHeight}px`);\n\n    const infoTx = titleTx + headerTitle.node().getBBox().width + infoElMargin;\n    const infoTy = headerMargin.top + infoElHeight / 4;\n    headerInfo.attr('transform', `translate(${infoTx}, ${infoTy})`);\n\n\n    const headerTotal = this.header.select('.vzb-br-total');\n\n    if (duration) {\n      headerTotal.select('text')\n        .transition('text')\n        .delay(duration)\n        .text(this.model.time.formatDate(this.time));\n    } else {\n      headerTotal.select('text')\n        .interrupt()\n        .text(this.model.time.formatDate(this.time));\n    }\n    headerTotal.style('opacity', Number(this.getLayoutProfile() !== 'large'));\n\n    const headerTotalBBox = headerTotal.node().getBBox();\n\n    const totalTx = this.width - headerMargin.right - headerTotalBBox.width;\n    const totalTy = headerMargin.top + headerTotalBBox.height;\n    headerTotal\n      .attr('transform', `translate(${totalTx}, ${totalTy})`)\n      .classed('vzb-transparent', headerTitleBBox.width + headerTotalBBox.width + 10 > this.width);\n\n    this.element.select('.vzb-data-warning-svg')\n      .style('height', `${margin.bottom}px`);\n\n\n    const warningBBox = this.dataWarningEl.select('text').node().getBBox();\n    this.dataWarningEl\n      .attr('transform', `translate(${this.width - margin.right - warningBBox.width}, ${warningBBox.height})`)\n      .select('text');\n\n    this.dataWarningEl\n      .select('svg')\n      .attr('width', warningBBox.height)\n      .attr('height', warningBBox.height)\n      .attr('x', -warningBBox.height - 5)\n      .attr('y', -warningBBox.height + 1);\n\n    this._updateDoubtOpacity();\n  },\n\n  drawData(duration = 0, force = false) {\n    const KEY = this.KEY;\n    // update the shown bars for new data-set\n    this._createAndDeleteBars(\n      this.barContainer.selectAll('.vzb-br-bar')\n        .data(this.sortedEntities, d => d[KEY])\n    );\n\n\n    const { presentation } = this.model.ui;\n    const presentationModeChanged = this._presentation !== presentation;\n\n    if (presentationModeChanged) {\n      this._presentation = presentation;\n    }\n\n\n    const entitiesCountChanged = typeof this._entitiesCount === 'undefined'\n      || this._entitiesCount !== this.sortedEntities.length;\n\n    if (presentationModeChanged || entitiesCountChanged) {\n      if (entitiesCountChanged) {\n        this._entitiesCount = this.sortedEntities.length;\n      }\n    }\n\n    this._resizeSvg();\n    this._scroll(duration);\n    this._drawColors();\n\n\n    const { barRectMargin, barValueMargin, scrollMargin, margin } = this.activeProfile;\n    const { axis_x } = this.model.marker;\n    const limits = axis_x.getLimits(axis_x.which);\n    const ltr = Math.abs(limits.max) >= Math.abs(limits.min);\n    const hasNegativeValues = ltr ? limits.min < 0 : limits.max > 0;\n\n\n    const rightEdge = (\n        this.width\n        - margin.right\n        - margin.left\n        - barRectMargin\n        - scrollMargin\n        - (hasNegativeValues ? 0 : this._getWidestLabelWidth())\n      ) / (hasNegativeValues ? 2 : 1);\n\n    this.xScale\n      .range([0, rightEdge]);\n    \n    if (this.model.marker.axis_x.scaleType !== \"log\") {\n      this.xScale\n        .domain([0, Math.max(...this.xScale.domain())]);\n    }\n\n    const shift = hasNegativeValues ? rightEdge : this._getWidestLabelWidth();\n\n    const barWidth = (value) => this.xScale(value);\n    const isLtrValue = value => ltr ? value >= 0 : value > 0;\n\n    const labelAnchor = value => isLtrValue(value) ? 'end' : 'start';\n    const valueAnchor = value => isLtrValue(value) ? 'start' : 'end';\n\n    const labelX = value => isLtrValue(value) ?\n      (margin.left + shift) :\n      (this.width - shift - scrollMargin - margin.right);\n\n    const barX = value => isLtrValue(value) ?\n      (labelX(value) + barRectMargin) :\n      (labelX(value) - barRectMargin);\n\n    const valueX = value => isLtrValue(value) ?\n      (barX(value) + barValueMargin) :\n      (barX(value) - barValueMargin);\n\n    const isLabelBig = (this._getWidestLabelWidth(true) + (ltr ? margin.left : margin.right)) < shift;\n    this.sortedEntities.forEach((bar) => {\n      const { value } = bar;\n\n      if (force || presentationModeChanged || bar.isNew || bar.changedValue) {\n        bar.barLabel\n          .attr('x', labelX(value))\n          .attr('y', this.activeProfile.barHeight / 2)\n          .attr('text-anchor', labelAnchor(value))\n          .text(isLabelBig ? bar.label : bar.labelSmall);\n\n        bar.barRect\n          .attr('rx', this.activeProfile.barHeight / 4)\n          .attr('ry', this.activeProfile.barHeight / 4)\n          .attr('height', this.activeProfile.barHeight);\n\n        bar.barValue\n          .attr('x', valueX(value))\n          .attr('y', this.activeProfile.barHeight / 2)\n          .attr('text-anchor', valueAnchor(value));\n      }\n\n      if (force || bar.changedWidth || presentationModeChanged) {\n        const width = Math.max(0, value && barWidth(Math.abs(value))) || 0;\n\n        if (force || bar.changedWidth || presentationModeChanged) {\n          bar.barRect\n            .transition().duration(duration).ease(d3.easeLinear)\n            .attr('width', width)\n        }\n\n        bar.barRect\n          .attr('x', barX(value) - (value < 0 ? width : 0));\n\n        if (force || bar.changedValue) {\n          bar.barValue\n            .text(this._formatter(value) || this.translator('hints/nodata'));\n        }\n      }\n\n      if (force || bar.changedIndex || presentationModeChanged) {\n        !duration && bar.self.interrupt();\n        (duration ? bar.self.transition().duration(duration).ease(d3.easeLinear) : bar.self)\n          .attr('transform', `translate(0, ${this._getBarPosition(bar.index)})`);\n      }\n    });\n  },\n\n  _resizeSvg() {\n    const { barHeight, barMargin } = this.activeProfile;\n    this.barSvg.attr('height', `${(barHeight + barMargin) * this.sortedEntities.length}px`);\n  },\n\n  _scroll(duration = 0) {\n    const follow = this.barContainer.select('.vzb-selected');\n    if (!follow.empty()) {\n      const d = follow.datum();\n      const yPos = this._getBarPosition(d.index);\n\n      const { margin } = this.activeProfile;\n      const height = this.height - margin.top - margin.bottom;\n\n      const scrollTo = yPos - (height + this.activeProfile.barHeight) / 2;\n      this.barViewport.transition().duration(duration)\n        .tween('scrollfor' + d.entity, this._scrollTopTween(scrollTo));\n    }\n  },\n\n  _getLabelText(values, labelNames, d) {\n    return this.KEYS.map(key => values[labelNames[key]] ? values[labelNames[key]][d[key]] : d[key]).join(\", \");\n  },\n\n  _createAndDeleteBars(updatedBars) {\n    const _this = this;\n    const KEYS = this.KEYS;\n    const dataKeys = this.dataKeys;\n\n    // TODO: revert this commit after fixing https://github.com/vizabi/vizabi/issues/2450\n    const [entity] = this.sortedEntities;\n    if (!this._entityLabels[entity.entity]) {\n      this._entityLabels[entity.entity] = entity.label;\n    }\n\n    const label = this._getLabelText(this.values, this.labelNames, entity.entity)\n    const localeChanged = this._entityLabels[entity.entity] !== label\n      && this.model.locale.id !== this._localeId;\n\n    if (localeChanged) {\n      this._localeId = this.model.locale.id;\n      this._entityLabels[entity.entity] = label;\n    }\n\n    // remove groups for entities that are gone\n    updatedBars.exit().remove();\n\n    // make the groups for the entities which were not drawn yet (.data.enter() does this)\n    updatedBars = (localeChanged ? updatedBars : updatedBars.enter().append('g'))\n      .each(function(d) {\n        const self = d3.select(this);\n\n        const label = d.label;\n        const labelSmall = label.length < 12 ? label : `${label.substring(0, 9)}...`;//\n\n        const selectedLabel = self.select('.vzb-br-label');\n        const barLabel = selectedLabel.size() ?\n          selectedLabel :\n          self.append('text')\n            .attr('class', 'vzb-br-label')\n            .attr('dy', '.325em');\n\n        const labelWidth = barLabel.text(label).node().getBBox().width;\n        const labelSmallWidth = barLabel.text(labelSmall).node().getBBox().width;\n\n        Object.assign(d, {\n          labelWidth,\n          labelSmallWidth,\n          labelSmall,\n          barLabel,\n        });\n\n        if (!localeChanged) {\n          self\n            .attr('class', 'vzb-br-bar')\n            .classed('vzb-selected', _this.model.marker.isSelected(d.entity))\n            .attr('id', `vzb-br-bar-${utils.getKey(d.entity, KEYS)}-${_this._id}`)\n            .on('mousemove', d => _this.model.marker.highlightMarker(d.entity))\n            .on('mouseout', () => _this.model.marker.clearHighlighted())\n            .on('click', d => {\n              _this.model.marker.selectMarker(d.entity);\n            });\n\n          const barRect = self.append('rect')\n            .attr('stroke', 'transparent');\n\n          const barValue = self.append('text')\n            .attr('class', 'vzb-br-value')\n            .attr('dy', '.325em');\n\n          Object.assign(d, {\n            self,\n            isNew: true,\n            barRect,\n            barValue,\n          });\n        }\n      })\n      .merge(updatedBars);\n  },\n\n  _getWidestLabelWidth(big = false) {\n    const widthKey = big ? 'labelWidth' : 'labelSmallWidth';\n    const labelKey = big ? 'label' : 'labelSmall';\n\n    const bar = this.sortedEntities\n      .reduce((a, b) => a[widthKey] < b[widthKey] ? b : a);\n\n    const text = bar.barLabel.text();\n    const width = bar.barLabel.text(bar[labelKey]).node().getBBox().width;\n    bar.barLabel.text(text);\n\n    return width;\n  },\n\n  _drawColors() {\n    const _this = this;\n    const dataKeys = this.dataKeys;\n\n    this.barContainer.selectAll('.vzb-br-bar>rect')\n      .each(function({ entity }) {\n        const rect = d3.select(this);\n\n        const colorValue = _this.values.color[utils.getKey(entity, dataKeys.color)];\n        const isColorValid = colorValue || colorValue === 0;\n\n        const fillColor = isColorValid ? String(_this._getColor(colorValue)) : COLOR_WHITEISH;\n        const strokeColor = isColorValid ? 'transparent' : COLOR_BLACKISH;\n\n        rect.style('fill') !== fillColor && rect.style('fill', fillColor);\n        rect.style('stroke') !== strokeColor && rect.style('stroke', strokeColor);\n      });\n\n    this.barContainer.selectAll('.vzb-br-bar>text')\n      .style('fill', ({ entity }) => this._getDarkerColor(this.values.color[utils.getKey(entity, dataKeys.color)] || null));\n  },\n\n  _getColor(value) {\n    return d3.rgb(this.cScale(value));\n  },\n\n  _getDarkerColor(d) {\n    return this._getColor(d).darker(2);\n  },\n\n\n  /**\n   * DATA HELPER FUNCTIONS\n   */\n\n  _scrollTopTween(scrollTop) {\n    return function() {\n      const node = this, i = d3.interpolateNumber(this.scrollTop, scrollTop);\n      return function(t) {\n        node.scrollTop = i(t);\n      };\n    };\n  },\n\n  _getBarPosition(i) {\n    return (this.activeProfile.barHeight + this.activeProfile.barMargin) * i;\n  },\n\n  _entities: {},\n\n  _sortByIndicator(values, dataKey) {\n    const KEYS = this.KEYS;\n    const KEY = this.KEY;\n    const dataKeys = this.dataKeys;\n    return this.markerKeys.map(entity => {\n      const key = utils.getKey(entity, KEYS);\n      const cached = this._entities[key];\n      const value = values[utils.getKey(entity, dataKey)];\n      const label = this._getLabelText(this.values, this.labelNames, entity);\n      const formattedValue = this._formatter(value);\n\n      if (cached) {\n        return Object.assign(cached, {\n          value,\n          label,\n          formattedValue,\n          changedValue: formattedValue !== cached.formattedValue,\n          changedWidth: value !== cached.value,\n          isNew: false\n        });\n      }\n\n      return this._entities[key] = {\n        entity,\n        value,\n        label,\n        formattedValue,\n        [this.KEY]: key,\n        changedValue: true,\n        changedWidth: true,\n        isNew: true\n      };\n    }).sort(({ value: a }, { value: b }) => b - a)\n      .map((entity, index) =>\n        Object.assign(entity, {\n          index,\n          changedIndex: index !== entity.index\n        }));\n  },\n\n  _selectBars() {\n    const KEYS = this.KEYS;\n    const selected = this.model.marker.select;\n\n    // unselect all bars\n    this.barContainer.classed('vzb-dimmed-selected', false);\n    this.barContainer.selectAll('.vzb-br-bar.vzb-selected').classed('vzb-selected', false);\n\n    // select the selected ones\n    if (selected.length) {\n      this.barContainer.classed('vzb-dimmed-selected', true);\n      selected.forEach(selectedBar => {\n        this.barContainer\n          .select(`#vzb-br-bar-${cssEscape(utils.getKey(selectedBar, KEYS))}-${this._id}`)\n          .classed('vzb-selected', true);\n      });\n    }\n\n  },\n\n  _updateOpacity() {\n    const { model: { marker } } = this;\n\n    const OPACITY_HIGHLIGHT_DEFAULT = 1;\n    const {\n      highlight,\n      select,\n\n      opacityHighlightDim: OPACITY_HIGHLIGHT_DIM,\n      opacitySelectDim: OPACITY_SELECT_DIM,\n      opacityRegular: OPACITY_REGULAR,\n    } = marker;\n\n    const [\n      someHighlighted,\n      someSelected\n    ] = [\n      highlight.length > 0,\n      select.length > 0\n    ];\n\n    this.barContainer.selectAll('.vzb-br-bar')\n      .style('opacity', d => {\n        if (someHighlighted && marker.isHighlighted(d.entity)) {\n          return OPACITY_HIGHLIGHT_DEFAULT;\n        }\n\n        if (someSelected) {\n          return marker.isSelected(d.entity) ? OPACITY_REGULAR : OPACITY_SELECT_DIM;\n        }\n\n        if (someHighlighted) {\n          return OPACITY_HIGHLIGHT_DIM;\n        }\n\n        return OPACITY_REGULAR;\n      });\n  },\n\n  _updateDoubtOpacity(opacity) {\n    this.dataWarningEl.style('opacity',\n      opacity || (\n        !this.model.marker.select.length ?\n          this.wScale(+this.model.time.value.getUTCFullYear().toString()) :\n          1\n      )\n    );\n  },\n\n  _getLabelText(values, labelNames, d) {\n    return this.KEYS.map(key => values[labelNames[key]] ? values[labelNames[key]][d[key]] : d[key]).join(\", \");    \n  }\n\n});\n\nexport default BarRankChart;\n\n\n\n// WEBPACK FOOTER //\n// ./src/component.js","/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */\n;(function(root, factory) {\n\t// https://github.com/umdjs/umd/blob/master/returnExports.js\n\tif (typeof exports == 'object') {\n\t\t// For Node.js.\n\t\tmodule.exports = factory(root);\n\t} else if (typeof define == 'function' && define.amd) {\n\t\t// For AMD. Register as an anonymous module.\n\t\tdefine([], factory.bind(root, root));\n\t} else {\n\t\t// For browser globals (not exposing the function separately).\n\t\tfactory(root);\n\t}\n}(typeof global != 'undefined' ? global : this, function(root) {\n\n\tif (root.CSS && root.CSS.escape) {\n\t\treturn root.CSS.escape;\n\t}\n\n\t// https://drafts.csswg.org/cssom/#serialize-an-identifier\n\tvar cssEscape = function(value) {\n\t\tif (arguments.length == 0) {\n\t\t\tthrow new TypeError('`CSS.escape` requires an argument.');\n\t\t}\n\t\tvar string = String(value);\n\t\tvar length = string.length;\n\t\tvar index = -1;\n\t\tvar codeUnit;\n\t\tvar result = '';\n\t\tvar firstCodeUnit = string.charCodeAt(0);\n\t\twhile (++index < length) {\n\t\t\tcodeUnit = string.charCodeAt(index);\n\t\t\t// Note: theres no need to special-case astral symbols, surrogate\n\t\t\t// pairs, or lone surrogates.\n\n\t\t\t// If the character is NULL (U+0000), then the REPLACEMENT CHARACTER\n\t\t\t// (U+FFFD).\n\t\t\tif (codeUnit == 0x0000) {\n\t\t\t\tresult += '\\uFFFD';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t// If the character is in the range [\\1-\\1F] (U+0001 to U+001F) or is\n\t\t\t\t// U+007F, []\n\t\t\t\t(codeUnit >= 0x0001 && codeUnit <= 0x001F) || codeUnit == 0x007F ||\n\t\t\t\t// If the character is the first character and is in the range [0-9]\n\t\t\t\t// (U+0030 to U+0039), []\n\t\t\t\t(index == 0 && codeUnit >= 0x0030 && codeUnit <= 0x0039) ||\n\t\t\t\t// If the character is the second character and is in the range [0-9]\n\t\t\t\t// (U+0030 to U+0039) and the first character is a `-` (U+002D), []\n\t\t\t\t(\n\t\t\t\t\tindex == 1 &&\n\t\t\t\t\tcodeUnit >= 0x0030 && codeUnit <= 0x0039 &&\n\t\t\t\t\tfirstCodeUnit == 0x002D\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\t// https://drafts.csswg.org/cssom/#escape-a-character-as-code-point\n\t\t\t\tresult += '\\\\' + codeUnit.toString(16) + ' ';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t// If the character is the first character and is a `-` (U+002D), and\n\t\t\t\t// there is no second character, []\n\t\t\t\tindex == 0 &&\n\t\t\t\tlength == 1 &&\n\t\t\t\tcodeUnit == 0x002D\n\t\t\t) {\n\t\t\t\tresult += '\\\\' + string.charAt(index);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If the character is not handled by one of the above rules and is\n\t\t\t// greater than or equal to U+0080, is `-` (U+002D) or `_` (U+005F), or\n\t\t\t// is in one of the ranges [0-9] (U+0030 to U+0039), [A-Z] (U+0041 to\n\t\t\t// U+005A), or [a-z] (U+0061 to U+007A), []\n\t\t\tif (\n\t\t\t\tcodeUnit >= 0x0080 ||\n\t\t\t\tcodeUnit == 0x002D ||\n\t\t\t\tcodeUnit == 0x005F ||\n\t\t\t\tcodeUnit >= 0x0030 && codeUnit <= 0x0039 ||\n\t\t\t\tcodeUnit >= 0x0041 && codeUnit <= 0x005A ||\n\t\t\t\tcodeUnit >= 0x0061 && codeUnit <= 0x007A\n\t\t\t) {\n\t\t\t\t// the character itself\n\t\t\t\tresult += string.charAt(index);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Otherwise, the escaped character.\n\t\t\t// https://drafts.csswg.org/cssom/#escape-a-character\n\t\t\tresult += '\\\\' + string.charAt(index);\n\n\t\t}\n\t\treturn result;\n\t};\n\n\tif (!root.CSS) {\n\t\troot.CSS = {};\n\t}\n\n\troot.CSS.escape = cssEscape;\n\treturn cssEscape;\n\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css.escape/css.escape.js\n// module id = 2\n// module chunks = 0 1","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/styles.scss\n// module id = 3\n// module chunks = 0 1","module.exports = \"<!-- Bar Chart Component -->\\n<div class=\\\"vzb-barrankchart\\\">\\n  <svg class=\\\"vzb-br-header\\\">\\n    <g class=\\\"vzb-br-title\\\">\\n      <text></text>\\n    </g>\\n    <g class=\\\"vzb-br-total\\\">\\n      <text></text>\\n    </g>\\n    <g class=\\\"vzb-br-axis-info vzb-noexport\\\"></g>\\n  </svg>\\n\\n  <div class=\\\"vzb-br-barsviewport vzb-dialog-scrollable\\\">\\n    <svg class=\\\"vzb-br-bars-svg\\\">\\n      <g class=\\\"vzb-br-bars\\\"></g>\\n    </svg>\\n  </div>\\n\\n  <svg class=\\\"vzb-data-warning-svg\\\">\\n    <g class=\\\"vzb-data-warning vzb-noexport\\\">\\n      <svg></svg>\\n      <text></text>\\n    </g>\\n  </svg>\\n</div>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/template.html\n// module id = 4\n// module chunks = 0 1","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 5\n// module chunks = 0 1"],"sourceRoot":""}